# Merged configuration for chronos-bare-metal with BLE UART capabilities
# This combines timing-critical SPI/Timer operations with Bluetooth communication

# =============================================================================
# Core System Configuration
# =============================================================================

# Disable boot banner for faster startup (from chronos-bare-metal)
CONFIG_BOOT_BANNER=n

# Enable assertions for both projects
CONFIG_ASSERT=y

# =============================================================================
# Memory Configuration
# =============================================================================

# Heap memory required for Bluetooth operations
CONFIG_HEAP_MEM_POOL_SIZE=2048

# Increased stack size for Bluetooth workqueue
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

# =============================================================================
# GPIO Configuration
# =============================================================================

# GPIO support needed by both projects
CONFIG_GPIO=y

# Release NFC pins for GPIO use (from chronos-bare-metal)
CONFIG_NFCT_PINS_AS_GPIOS=y

# =============================================================================
# UART Configuration
# =============================================================================

# Enable UART driver with async API (needed by both)
CONFIG_SERIAL=y
CONFIG_UART_ASYNC_API=y

# Specific UART instance for BLE UART service
CONFIG_NRFX_UARTE0=y

# Console configuration (from peripheral_uart)
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y

# =============================================================================
# Direct Hardware Access (from chronos-bare-metal)
# =============================================================================

# SPI master 1 for direct nrfx access
CONFIG_NRFX_SPIM1=y

# Hardware timers for precise timing control
CONFIG_NRFX_TIMER0=y
CONFIG_NRFX_TIMER1=y

# ADC support
CONFIG_ADC=y

# =============================================================================
# Bluetooth Configuration (from peripheral_uart)
# =============================================================================

# Core Bluetooth support
CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_DEVICE_NAME="Chronos_BLE_UART"
CONFIG_BT_MAX_CONN=1
CONFIG_BT_MAX_PAIRED=1

# Nordic UART Service
CONFIG_BT_NUS=y

# Bluetooth security and bonding
CONFIG_BT_SETTINGS=y
CONFIG_FLASH=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_FLASH_MAP=y

# =============================================================================
# Development Kit Support (from peripheral_uart)
# =============================================================================

# LED and button support for user interaction
CONFIG_DK_LIBRARY=y

# =============================================================================
# Logging Configuration
# =============================================================================

# Enable logging system
CONFIG_LOG=y

# Use RTT for logging to avoid UART conflicts
CONFIG_USE_SEGGER_RTT=y
CONFIG_LOG_BACKEND_RTT=y
CONFIG_LOG_BACKEND_UART=n

# Disable printk redirection to log (helps with timing)
CONFIG_LOG_PRINTK=n

# Disable log processing thread (from chronos-bare-metal)
# This ensures logging doesn't interfere with timing
CONFIG_LOG_PROCESS_THREAD=n

# =============================================================================
# Settings Storage (required for Bluetooth bonding)
# =============================================================================

CONFIG_SETTINGS=y

# Use ZMS or NVS based on your hardware (auto-selected in peripheral_uart)
CONFIG_ZMS=y
# CONFIG_NVS=y  # Alternative if not using RRAM/MRAM