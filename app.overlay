/*
 * Application core overlay for chronos_ble_uart project
 * This file contains device tree modifications specific to the application core
 * when running in a multi-core configuration with sysbuild
 */

/* 
 * IPC (Inter-Processor Communication) configuration
 * This is crucial for communication between app and network cores
 */
/ {
    chosen {
        /* 
         * Define which UART to use for Nordic UART Service
         * In dual-core setup, this UART is only accessed by the app core
         */
        nordic,nus-uart = &uart0;
        
        /*
         * Console output - using RTT is recommended for dual-core setups
         * to avoid UART conflicts and reduce interrupt overhead
         */
        zephyr,console = &rtt0;
    };
};

/*
 * Shared memory configuration for IPC
 * This defines how the two cores communicate
 */
&ipc0 {
    status = "okay";
};

/*
 * RAM allocation for shared memory
 * The cores need a common area to exchange messages
 */
&sram0_shared {
    status = "okay";
};

/*
 * Application core specific peripheral configurations
 */

/* Your SPI configuration for DAC control */
&spi1 {
    status = "disabled"; /* Disabled for Zephyr, you're using nrfx directly */
};

/* GPIO controllers for your timing pins */
&gpio0 {
    status = "okay";
};

&gpio1 {
    status = "okay";
};

/* 
 * UART0 configuration for BLE NUS
 * Even though the Bluetooth stack runs on the network core,
 * the UART data is handled by the application core
 */
&uart0 {
    status = "okay";
    current-speed = <115200>;
};